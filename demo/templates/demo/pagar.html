{% extends "demo/base.html" %}
{% load static %}
{%block content %}

					<!-- Banner -->
                    <section id="banner">
                        <header>
                            <h2>Bienvenidos a LIVE music</h2>
                            <p>PAGAR</p>
                        </header>        
                        <table>
                            <tr>
                                <th>Total a Pagar: </th>
                                <td id="total-pago"> 0.00</td>
                            </tr>
                        </table>  
						     <!-- Aquí puedes agregar el formulario de pago -->
							 <script>
								// Obtener el total de sessionStorage
								const total = sessionStorage.getItem('total');
								if (total) {
									document.getElementById('total-pago').textContent = total;
								} else {
									document.getElementById('total-pago').textContent = '0.00';
								}
							</script>   
		    
							<style>
								table {
									width: 50%;
									margin: 20px auto;
									border-collapse: collapse;
									background-color: white;
								}
								th, td {
									border: 3px solid rgb(38, 219, 243);
									padding: 5px;
									text-align: left;
									color: black;
								}
							</style> 
  
						</section>

    <header class="container1">
        <div class="container1-content container">
            <div class="container1-txt">
                <form id="form-pago" method="post" action="#">
                    {% csrf_token %}
                    <label for="card_number">Número de Tarjeta:</label>
                    <input type="text" id="card_number" name="card_number" required><br><br>
                    <label for="expiry_date">Fecha de Vencimiento:</label>
                    <input type="text" id="expiry_date" name="expiry_date" placeholder="MM/YY" required><br><br>
                    <label for="cvv">CVV:</label>
                    <input type="text" id="cvv" name="cvv" required><br><br>
                    <input type="hidden" id="total_pago_hidden" name="total_pago" value="0.00">
                    <button type="submit">Pagar</button>
                </form>
            </div>
        </div>
    </header>


    <script>

        // Función para redirigir y mostrar mensaje aleatorio
        function redirigirAPago() {
            // Simulación de pago exitoso o sin suficiente saldo
            const exito = Math.random() < 0.5; // 50% de probabilidad de éxito

            // Redirigir a la página de resultado
            if (exito) {
                window.location.href = "{% url 'pagoexitoso' %}";
            } else {
                window.location.href = "{% url 'saldoinsuficiente' %}";
            }
        }

        // Evento de clic en el botón Pagar
        document.getElementById('form-pago').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevenir envío automático del formulario
            redirigirAPago(); // Llamar a la función de redirección y mensaje aleatorio
        });
    </script>


	{% endblock %}